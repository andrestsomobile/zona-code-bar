package maestro.action;import java.io.IOException;import java.sql.SQLException;import javax.servlet.ServletException;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import maestro.control.gstcompania;import maestro.entity.compania;import maestro.form.companiaForm;import org.apache.struts.action.Action;import org.apache.struts.action.ActionForm;import org.apache.struts.action.ActionForward;import org.apache.struts.action.ActionMapping;import org.apache.struts.action.ActionMessage;import org.apache.struts.action.ActionMessages;  public final class companiaAction  extends Action{
			 public ActionForward execute(ActionMapping mapping,	ActionForm form, 			HttpServletRequest request,	HttpServletResponse response)			throws IOException, ServletException {
companiaForm _form = (companiaForm)form;  gstcompania control = new gstcompania(); String opcion = request.getParameter("opcion");  opcion = opcion==null || ( opcion!=null && opcion.equals("")) ? "crear" : opcion; 
//OPCION DE set:  if(opcion.equals("set")) {  compania entity = control.getcompania(request.getParameter("codsx")); companiaForm  temp  = new companiaForm();  temp.setopcion("update"); temp.llenar(entity);  request.setAttribute("companiaForm", temp);  return mapping.findForward("compania_datos");  }  String mensaje = "";  //opcion de CREAR  if(opcion.equals("crear")) {  String comdireccion = _form.getcomdireccion();   String comnombre = _form.getcomnombre();   String comfax = _form.getcomfax();   String comciudad = _form.getcomciudad();   String comemail = _form.getcomemail();   String comgerente = _form.getcomgerente();   String comcontacto = _form.getcomcontacto();   String comcargo = _form.getcomcargo();   String comtelefono = _form.getcomtelefono();   String comnit = _form.getComnit(); String comtipo = _form.getComtipo(); String cominventario = _form.getCominventario(); String commapa = _form.getCommapa();
  try {  control.crearcompania(comdireccion,comnombre,comfax,comciudad,comemail,		 comgerente,comcontacto,comcargo,comtelefono, comnit, comtipo, cominventario, commapa);  mensaje = "compania Creado con Exito";    } catch (SQLException e) {   e.printStackTrace();  mensaje = "No se pudo Crear el compania: <br> " + e.getLocalizedMessage();   }  }  // Opcion de update  if(opcion.equals("update")) {   try {   control.updatecompania(_form);   mensaje = "compania Actualizado con Exito";    } catch (SQLException e) { e.printStackTrace();   mensaje = "No se pudo Actualizar el compania: <br> " + e.getLocalizedMessage();  }  }  // Opcion de eliminar  if(opcion.equals("delete")) { String codsx = request.getParameter("codsx");  try {   control.eliminar(codsx);   mensaje = "compania Eliminado con Exito";    } catch (SQLException e) { e.printStackTrace();   mensaje = "No se pudo Eliminar el compania: <br> " + e.getLocalizedMessage();  }  }  ActionMessages e = getErrors(request);  e.add("general", new ActionMessage(mensaje, false)); addErrors(request, e);  return mapping.findForward("compania");    } }