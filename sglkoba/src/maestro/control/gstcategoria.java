package maestro.control;import maestro.form.*;import maestro.entity.*;import db.*;import java.util.Collection;import java.sql.SQLException;import administracion.entity.usuario;/******************************************************************************* * CLASE GENERADA CON generator V3.0 By pablito**** ******************************************************************************/public class gstcategoria extends GstTabla {	public gstcategoria() {		db = new beanConnector();		this.classEntidad = categoria.class;	}	public gstcategoria(beanConnector db) {		this.db = db;		this.classEntidad = categoria.class;	}	public Collection getlistacategoria() {		String consulta = " SELECT * FROM categoria order by catcodcompania asc";		return getLista(consulta);	}	public Collection getlistacategoria(String catcodcompania) {		String consulta = " SELECT * FROM categoria where catcodcompania=" + catcodcompania;		return getLista(consulta);	}	public categoria getcategoria_by_ukey(String catnombre, String catcodcompania) {		 String cad = "SELECT * FROM categoria WHERE catnombre='"+catnombre+ "'  and catcodcompania=" + catcodcompania ;		 return (categoria)getEntidad(cad);  }	public Collection getlistacategoria(String start, String param) {		start = start == null ? "0" : start;		param = param == null ? "" : param;		String consulta = " SELECT * FROM categoria where " +			getTextoBusquedaResumen( param) +" order by catcodsx desc " +				"limit " +				 this.maxfilas + " offset  "				+ (Integer.parseInt(start) * this.maxfilas);		return getLista(consulta);	}	public Collection getlistacategoria(String compania, String start, String param) {		start = start == null ? "0" : start;		param = param == null ? "NULL" : param;		String consulta = " SELECT categoria.* FROM categoria, compania where comcodsx = catcodcompania and comcodsx=" + compania + "  and "+			getTextoBusquedaResumen( "categoria",param) +				" order by catcodsx desc " +				" limit " + this.maxfilas + " offset  "				+ (Integer.parseInt(start) * this.maxfilas);		return getLista(consulta);	}	public int getTotalPaginaslistacategoria(String param) {		param = param == null ? "" : param;		String consulta = " SELECT count(1) FROM categoria where  " +			getTextoBusquedaResumen( param);		return getPaginas(consulta);	}		public int getTotalPaginaslistacategoria(String compania, String param) {		param = param == null ? "" : param;		String consulta = " SELECT count(1) FROM categoria, compania where comcodsx = catcodcompania and   " +			getTextoBusquedaResumen( "categoria",param);		return getPaginas(consulta);	}	public boolean crearcategoria(String catcodpadre, String catdescripcion,			String catcodcompania, String catnombre) throws SQLException {		String insert = "INSERT INTO categoria (catcodpadre,catdescripcion,catcodcompania,catnombre) VALUES ("				+ (catcodpadre == null ? "NULL" : "'" + catcodpadre + "'")				+ ","				+ (catdescripcion == null ? "NULL" : "'" + catdescripcion + "'")				+ ","				+ (catcodcompania == null ? "NULL" : "'" + catcodcompania + "'")				+ ","				+ (catnombre == null ? "NULL" : "'" + catnombre + "'")				+ ")";		int resp = db.executeUpdate(insert);		return resp == 0 ? false : true;	}	public categoria getcategoria(String catcodsx) {		String cad = "SELECT * FROM categoria WHERE catcodsx='" + catcodsx				+ "'";		return (categoria) getEntidad(cad);	}	public boolean updatecategoria(categoria entity) throws SQLException {		String cad = " update categoria set  "				+ " catcodpadre = "				+ (entity.getcatcodpadre() == null ? "NULL" : "'"						+ entity.getcatcodpadre() + "'")				+ ","				+ " catdescripcion = "				+ (entity.getcatdescripcion() == null ? "NULL" : "'"						+ entity.getcatdescripcion() + "'")				+ ","				+ " catcodcompania = "				+ (entity.getcatcodcompania() == null ? "NULL" : "'"						+ entity.getcatcodcompania() + "'")				+ ","				+ " catnombre = "				+ (entity.getcatnombre() == null ? "NULL" : "'"						+ entity.getcatnombre() + "'") + " where catcodsx = "				+ entity.getcatcodsx();		int resp = db.executeUpdate(cad);		return resp == 0 ? false : true;	}	public boolean updatecategoria(categoriaForm entity) throws SQLException {		String cad = " update categoria set  "				+ " catcodpadre = "				+ (entity.getcatcodpadre() == null ? "NULL" : "'"						+ entity.getcatcodpadre() + "'")				+ ","				+ " catdescripcion = "				+ (entity.getcatdescripcion() == null ? "NULL" : "'"						+ entity.getcatdescripcion() + "'")				+ ","				+ " catcodcompania = "				+ (entity.getcatcodcompania() == null ? "NULL" : "'"						+ entity.getcatcodcompania() + "'")				+ ","				+ " catnombre = "				+ (entity.getcatnombre() == null ? "NULL" : "'"						+ entity.getcatnombre() + "'") + " where catcodsx = "				+ entity.getcatcodsx();		int resp = db.executeUpdate(cad);		return resp == 0 ? false : true;	}	public boolean eliminar(String catcodsx) throws SQLException {		String elim = " delete from categoria where catcodsx = '" + catcodsx				+ "'";		int r = db.executeUpdate(elim);		return r == 0 ? false : true;	}		public String getPromedioAlistamiento(String compania, String fecha_ini, String fecha_fin, String catcodsx) {		String cad= "select sum(valor)/count(1) from inventario_promedio(" + compania +" , '" + fecha_ini +" ', '+ "  + fecha_fin + "', " + catcodsx + " )";		return getCampo( cad);	}}