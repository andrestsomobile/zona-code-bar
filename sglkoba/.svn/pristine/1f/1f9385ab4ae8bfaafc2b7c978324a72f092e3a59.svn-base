package ingreso.form;import ingreso.control.gstingreso;import ingreso.control.gsttrafico;import ingreso.entity.ingreso;import javax.servlet.http.HttpServletRequest;import maestro.control.gstcompania;import org.apache.struts.action.ActionErrors;import org.apache.struts.action.ActionForm;import org.apache.struts.action.ActionMapping;import org.apache.struts.action.ActionMessage;public class ingresoForm extends ActionForm {	private String ingcodsx;	private String ingcodcia;	private String ingfecha;	private String ingtipo;	private String ingtrafico;	private String ingobservacion;	private String ingestado;	private String ingcausal;	private String ingcli_devolucion;	private String ingpesoneto;	private String ingpesobruto;	private String ingfob;	private String ingcantidad;	private String ingciudad_dev;	private String opcion;	private String ingconsec, ingconseczfp, ingplanilla;		private String nombrecia;		private String ingtipoasignacion;	public String getIngcausal() {		return ingcausal;	}	public void setIngcausal(String ingcausal) {		this.ingcausal = ingcausal;	}	public void setopcion(String newopcion) {		this.opcion = newopcion;	}	public String getopcion() {		return this.opcion;	}	public String getingcodsx() {		return ingcodsx;	}	public String getingcodcia() {		return ingcodcia;	}	public String getingfecha() {		return ingfecha;	}	public String getingtipo() {		return ingtipo;	}	public String getingtrafico() {		return ingtrafico;	}	public void setingcodsx(String new_ingcodsx) {		this.ingcodsx = new_ingcodsx;	}	public void setingcodcia(String new_ingcodcia) {		this.ingcodcia = new_ingcodcia;	}	public void setingfecha(String new_ingfecha) {		this.ingfecha = new_ingfecha;	}	public void setingtipo(String new_ingtipo) {		this.ingtipo = new_ingtipo;	}	public void setingtrafico(String new_ingtrafico) {		this.ingtrafico = new_ingtrafico;	}	public void reset(ActionMapping mapping, HttpServletRequest request) {	}	public ActionErrors validate(ActionMapping mapping, HttpServletRequest request) {		ActionErrors errors = new ActionErrors();		gstingreso gingreso = new gstingreso();		opcion = opcion == null ? "crear" : opcion;		if (opcion.equals("set") || opcion.equals("delete") || opcion.equals("activar") || opcion.equals("actualizar_consecutivo_zf"))			return null;		if (opcion.equals("crear")) {			// @todo COMPLETAR EL CREAR, SOLO LLAVES UNICAS O REPETIDAS			if (ingtipoasignacion.equals(""))				errors.add("ingtipoasignacion", new ActionMessage("Seleccione el tipo de asignacion de posiciones", false));		}		if (opcion.equals("update") && ingtipo.equals("TRAFICO") && ingestado.equals("FINALIZADO")) {			int referencias_trafico = new gsttrafico().getTotalReferenciasByTrafico(ingtrafico);			int referencias_ingreso = gingreso.getTotalReferenciasIngreso(ingcodsx);			if (referencias_ingreso == 0) {				errors.add("ingestado", new ActionMessage("No se puede finalizar el trafico, <br>No puede finalizar un ingreso si no tiene al menos una referencia", false));				ingestado = "TRAMITE";			}			if (referencias_ingreso != 0 && referencias_trafico != referencias_ingreso) {				errors.add("ingestado", new ActionMessage("No se puede finalizar el trafico, <br>El Ingreso debe tener las mismas referencias que el Trafico asociado", false));				ingestado = "TRAMITE";			}		}		// valido campos requeridos:		if (ingcodcia.equals(""))			errors.add("ingcodcia", new ActionMessage("El ingcodcia no puede ser vacio", false));		if (ingfecha.equals(""))			errors.add("ingfecha", new ActionMessage("El ingfecha no puede ser vacio", false));		if (ingtipo.equals(""))			errors.add("ingtipo", new ActionMessage("El ingtipo no puede ser vacio", false));		if (ingtrafico != null && !ingtrafico.equals("")) {			gsttrafico gtraf = new gsttrafico();			if (gtraf.gettrafico(ingtrafico) == null)				errors.add("ingtrafico", new ActionMessage("El Trafico debe existir", false));		}		if (!errors.isEmpty())			errors.add("general", new ActionMessage("Errores en la informacion registrada, revise", false));		return errors;	}	public void llenar(ingreso entity) {		this.ingcodsx = entity.getingcodsx();		this.ingcodcia = entity.getingcodcia();		this.ingfecha = entity.getingfecha();		this.ingtipo = entity.getingtipo();		this.ingtrafico = entity.getingtrafico();		this.ingobservacion = entity.getIngobservacion();		this.ingestado = entity.getIngestado();		this.ingcausal = entity.getIngcausal();		this.ingcli_devolucion = entity.getIngcli_devolucion();		this.ingpesoneto = entity.getIngpesoneto();		this.ingpesobruto = entity.getIngpesobruto();		this.ingfob = entity.getIngfob();		this.ingciudad_dev = entity.getIngciudad_dev();		this.ingcantidad = entity.getIngcantidad();		this.ingconsec = entity.getIngconsec();		this.ingconseczfp = entity.getIngconseczfp();		this.ingplanilla = entity.getIngplanilla();		gstcompania gcomp = new gstcompania();		if (ingcodcia != null && !ingcodcia.equals("")) {			nombrecia = gcomp.getcompania(ingcodcia).getcomnombre();		}	}	/**	 * @retur	 * @uml.property name="ingestado"	 */	public String getIngestado() {		return ingestado;	}	/**	 * @param ingestado	 * @uml.property name="ingestado"	 */	public void setIngestado(String ingestado) {		this.ingestado = ingestado;	}	/**	 * @return	 * @uml.property name="ingobservacion"	 */	public String getIngobservacion() {		return ingobservacion;	}	/**	 * @param ingobservacion	 * @uml.property name="ingobservacion"	 */	public void setIngobservacion(String ingobservacion) {		this.ingobservacion = ingobservacion;	}	/**	 * @return	 * @uml.property name="ingcli_devolucion"	 */	public String getIngcli_devolucion() {		return ingcli_devolucion;	}	/**	 * @param ingcli_devolucion	 * @uml.property name="ingcli_devolucion"	 */	public void setIngcli_devolucion(String ingcli_devolucion) {		this.ingcli_devolucion = ingcli_devolucion;	}	/**	 * @return	 * @uml.property name="ingfob"	 */	public String getIngfob() {		return ingfob;	}	/**	 * @param ingfob	 * @uml.property name="ingfob"	 */	public void setIngfob(String ingfob) {		this.ingfob = ingfob;	}	/**	 * @return	 * @uml.property name="ingpesobruto"	 */	public String getIngpesobruto() {		return ingpesobruto;	}	/**	 * @param ingpesobruto	 * @uml.property name="ingpesobruto"	 */	public void setIngpesobruto(String ingpesobruto) {		this.ingpesobruto = ingpesobruto;	}	/**	 * @return	 * @uml.property name="ingpesoneto"	 */	public String getIngpesoneto() {		return ingpesoneto;	}	/**	 * @param ingpesoneto	 * @uml.property name="ingpesoneto"	 */	public void setIngpesoneto(String ingpesoneto) {		this.ingpesoneto = ingpesoneto;	}	/**	 * @return	 * @uml.property name="ingciudad_dev"	 */	public String getIngciudad_dev() {		return ingciudad_dev;	}	/**	 * @param ingciudad_dev	 * @uml.property name="ingciudad_dev"	 */	public void setIngciudad_dev(String ingciudad_dev) {		this.ingciudad_dev = ingciudad_dev;	}	/**	 * @return	 * @uml.property name="ingcantidad"	 */	public String getIngcantidad() {		return ingcantidad;	}	public void setIngcantidad(String ingcantidad) {		this.ingcantidad = ingcantidad;	}	public String getIngconsec() {		return ingconsec;	}	public void setIngconsec(String ingconsec) {		this.ingconsec = ingconsec;	}	public String getIngconseczfp() {		return ingconseczfp;	}	public void setIngconseczfp(String ingconseczfp) {		this.ingconseczfp = ingconseczfp;	}	public String getIngplanilla() {		return ingplanilla;	}	public void setIngplanilla(String ingplanilla) {		this.ingplanilla = ingplanilla;	}	public String getnombrecia() {		return nombrecia;	}	public void setnombrecia(String nombrecia) {		this.nombrecia = nombrecia;	}	public String getIngtipoasignacion() {		return ingtipoasignacion;	}	public void setIngtipoasignacion(String ingtipoasignacion) {		this.ingtipoasignacion = ingtipoasignacion;	}		}